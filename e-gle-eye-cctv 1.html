<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PyroGuard â€” ì‚°ë¶ˆ CCTV ê°ì§€ ì‹œìŠ¤í…œ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&family=DM+Mono:wght@300;400;500&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:         #f4f5f7;
  --white:      #ffffff;
  --gray-50:    #f8f9fb;
  --gray-100:   #eceef3;
  --gray-200:   #d7dae4;
  --gray-300:   #b0b8cc;
  --gray-500:   #6b7592;
  --gray-700:   #3a4260;
  --gray-900:   #18213a;

  --red:        #d92b2b;
  --red-lt:     #fff1f1;
  --red-bd:     #f5b8b8;
  --amber:      #e8650a;
  --amber-lt:   #fff4ec;
  --green:      #0d8c4a;
  --green-lt:   #e3fbe9;
  --blue:       #1251c9;
  --blue-lt:    #eaf0ff;

  /* Agencies */
  --forest:     #1a7a43;   /* ì‚°ë¦¼ì²­ â€” forest green */
  --fire:       #c42b1c;   /* ì†Œë°©ì²­ â€” fire red */
  --police:     #1251c9;   /* ê²½ì°°ì²­ â€” blue */

  --sh-xs: 0 1px 3px rgba(18,33,58,.05);
  --sh-sm: 0 2px 8px rgba(18,33,58,.07), 0 0 0 1px rgba(18,33,58,.04);
  --sh-md: 0 6px 20px rgba(18,33,58,.09), 0 0 0 1px rgba(18,33,58,.04);
  --sh-lg: 0 16px 48px rgba(18,33,58,.13);

  --r4:  4px;
  --r8:  8px;
  --r12: 12px;
  --r16: 16px;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { font-size:14px; }
body {
  font-family: 'Noto Sans KR', 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--gray-900);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOPBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar {
  position: fixed; top:0; left:0; right:0;
  height: 54px;
  background: var(--gray-900);
  display: flex; align-items: center;
  padding: 0 20px;
  z-index: 300;
  gap: 0;
}

.brand {
  display: flex; align-items: center; gap: 9px;
  margin-right: 28px;
}

.brand-flame {
  width: 28px; height: 28px;
  background: linear-gradient(160deg, #ff7a1a, #ffd000);
  border-radius: 7px;
  display: flex; align-items: center; justify-content: center;
  font-size: 15px;
  animation: flamePop 2.8s ease-in-out infinite;
}

@keyframes flamePop {
  0%,100% { transform: scaleY(1); }
  40%     { transform: scaleY(1.1) scaleX(.93); }
  70%     { transform: scaleY(.94) scaleX(1.04); }
}

.brand-text {
  font-family: 'DM Sans', sans-serif;
  font-size: 16px; font-weight: 700;
  color: white; letter-spacing: -.3px;
}
.brand-text em { color: #ff9233; font-style: normal; }

.topbar-tabs {
  display: flex; gap: 2px;
  flex: 1;
}

.ttab {
  padding: 6px 14px;
  border-radius: var(--r4);
  font-size: 13px; font-weight: 500;
  color: rgba(255,255,255,.55);
  cursor: pointer; border: none;
  background: transparent;
  font-family: 'Noto Sans KR', sans-serif;
  transition: all .15s;
  white-space: nowrap;
}
.ttab:hover { color: rgba(255,255,255,.85); background: rgba(255,255,255,.07); }
.ttab.on  { color: white; background: rgba(255,255,255,.13); }

.topbar-right {
  display: flex; align-items: center; gap: 10px;
  margin-left: auto;
}

.live-pill {
  display: flex; align-items: center; gap: 5px;
  padding: 4px 10px;
  background: rgba(13,140,74,.25);
  border: 1px solid rgba(13,140,74,.5);
  border-radius: 20px;
  font-family: 'DM Mono', monospace;
  font-size: 11px; color: #5ce89a;
}
.live-dot { width:6px; height:6px; border-radius:50%; background:#5ce89a;
  animation: blink 1.6s ease-in-out infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.2} }

.alert-pill {
  display: flex; align-items: center; gap: 5px;
  padding: 4px 12px;
  background: rgba(217,43,43,.22);
  border: 1px solid rgba(217,43,43,.5);
  border-radius: 20px;
  font-size: 12px; font-weight: 600; color: #ff7070;
  animation: alertBlink 2s ease-in-out infinite;
  cursor: pointer;
}
@keyframes alertBlink { 0%,100%{background:rgba(217,43,43,.22)} 50%{background:rgba(217,43,43,.35)} }
.alert-dot { width:6px; height:6px; border-radius:50%; background:#ff5555; animation:blink .9s infinite; }

.tb-clock { font-family:'DM Mono',monospace; font-size:12px; color:rgba(255,255,255,.4);
  border-left:1px solid rgba(255,255,255,.1); padding-left:12px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.layout {
  display: grid;
  grid-template-columns: 1fr 340px;
  grid-template-rows: auto 1fr;
  height: calc(100vh - 54px - 62px);
  margin-top: calc(54px + 62px); /* topbar + banner */
  transition: margin-top .3s cubic-bezier(.22,1,.36,1), height .3s cubic-bezier(.22,1,.36,1);
}
.layout.no-banner {
  height: calc(100vh - 54px);
  margin-top: 54px;
}

/* â”€â”€ Sub-bar â”€â”€ */
.subbar {
  grid-column: 1/-1;
  height: 44px;
  background: var(--white);
  border-bottom: 1px solid var(--gray-100);
  display: flex; align-items: center;
  padding: 0 18px; gap: 16px;
  box-shadow: var(--sh-xs);
}

.subbar-label {
  font-family: 'DM Mono', monospace;
  font-size: 11px; color: var(--gray-300);
  text-transform: uppercase; letter-spacing: 1.5px;
}

.subbar-stat {
  display: flex; align-items: center; gap: 5px;
  font-size: 12.5px; color: var(--gray-500);
}
.subbar-stat strong { color: var(--gray-900); font-weight: 600; }
.subbar-stat.s-red strong { color: var(--red); }
.subbar-stat.s-amber strong { color: var(--amber); }

.vdiv { width:1px; height:18px; background:var(--gray-100); }

.subbar-right { margin-left:auto; display:flex; gap:8px; align-items:center; }

.sm-btn {
  padding: 5px 12px;
  border-radius: var(--r4);
  font-size: 12.5px; font-weight: 500;
  border: 1px solid var(--gray-200);
  background: var(--white); color: var(--gray-700);
  cursor: pointer; font-family:'Noto Sans KR',sans-serif;
  transition: all .15s;
}
.sm-btn:hover { background: var(--gray-50); border-color:var(--gray-300); }
.sm-btn.prim { background:var(--gray-900); color:white; border-color:var(--gray-900); }
.sm-btn.prim:hover { background:#0f1629; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEFT â€” CCTV MAIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cctv-area {
  overflow-y: auto;
  padding: 16px;
  display: flex; flex-direction: column; gap: 14px;
  background: var(--bg);
}

/* â”€â”€ Featured (fire) camera â”€â”€ */
.featured-cam {
  background: var(--white);
  border: 2px solid var(--red-bd);
  border-radius: var(--r16);
  overflow: hidden;
  box-shadow: 0 0 0 4px rgba(217,43,43,.06), var(--sh-md);
  animation: featuredPulse 2.5s ease-in-out infinite;
}

@keyframes featuredPulse {
  0%,100% { box-shadow: 0 0 0 4px rgba(217,43,43,.06), var(--sh-md); }
  50%      { box-shadow: 0 0 0 8px rgba(217,43,43,.1), var(--sh-md); }
}

.cam-header {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 14px;
  border-bottom: 1px solid var(--gray-100);
}

.cam-id {
  font-family: 'DM Mono', monospace;
  font-size: 12px; font-weight: 500;
  color: var(--gray-700);
}

.cam-badge {
  padding: 2px 8px;
  border-radius: var(--r4);
  font-size: 10.5px; font-weight: 700;
  letter-spacing: .3px;
}
.cb-fire   { background:var(--red); color:white; animation: badgePulse 1.2s ease-in-out infinite; }
.cb-watch  { background:var(--amber-lt); color:var(--amber); border:1px solid #ffc89a; }
.cb-normal { background:var(--green-lt); color:var(--green); }

@keyframes badgePulse {
  0%,100% { background:var(--red); }
  50% { background:#b02222; }
}

.cam-loc { font-size: 12px; color:var(--gray-500); }

.cam-actions { margin-left:auto; display:flex; gap:6px; }
.cam-act-btn {
  padding:4px 10px; border-radius:var(--r4);
  font-size:11.5px; font-weight:500;
  border:1px solid var(--gray-200); background:var(--white);
  color:var(--gray-700); cursor:pointer; transition:all .15s;
  font-family:'Noto Sans KR',sans-serif;
}
.cam-act-btn:hover { background:var(--gray-50); }
.cam-act-btn.expand { background:var(--gray-900); color:white; border-color:var(--gray-900); }

/* â”€â”€ CCTV Video mockup â”€â”€ */
.cam-feed {
  position: relative;
  background: #0a0c10;
  aspect-ratio: 16/9;
  overflow: hidden;
}

.cam-feed-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 50% 60% at 55% 45%, rgba(255,90,0,.18) 0%, transparent 60%),
    radial-gradient(ellipse 30% 40% at 70% 60%, rgba(255,180,0,.1) 0%, transparent 50%),
    linear-gradient(180deg, #0f1520 0%, #161e2e 50%, #0a0e18 100%);
}

/* Simulated forest scene */
.scene-trees {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 55%;
  background:
    linear-gradient(0deg,
      rgba(10,30,15,.95) 0%,
      rgba(12,40,18,.6) 40%,
      transparent 100%);
}

.scene-tree {
  position: absolute;
  bottom: 0;
  width: 0;
  height: 0;
  border-left: solid transparent;
  border-right: solid transparent;
  border-bottom: solid;
  opacity: .7;
}

/* Smoke/fire sim */
.fire-sim {
  position: absolute;
  bottom: 42%; left: 52%;
  transform: translateX(-50%);
}

.smoke-particle {
  position: absolute;
  border-radius: 50%;
  background: rgba(200,200,200,.55);
  animation: smokeRise linear infinite;
}

@keyframes smokeRise {
  0%   { transform: translateY(0) scale(.3); opacity:.6; }
  100% { transform: translateY(-120px) scale(2.5) translateX(20px); opacity:0; }
}

.flame-svg {
  position: absolute;
  bottom: -4px; left: 50%;
  transform: translateX(-50%);
  animation: flameWobble 0.8s ease-in-out infinite alternate;
}

@keyframes flameWobble {
  0%   { transform: translateX(-50%) scaleY(1) scaleX(1); }
  100% { transform: translateX(-50%) scaleY(1.15) scaleX(.9); }
}

/* AI Overlay elements */
.ai-overlay {
  position: absolute; inset: 0;
  pointer-events: none;
}

/* Detection bounding box */
.detect-box {
  position: absolute;
  border: 2px solid #ff4500;
  border-radius: 3px;
  animation: boxPulse 1.5s ease-in-out infinite;
}

@keyframes boxPulse {
  0%,100% { border-color: #ff4500; box-shadow: 0 0 8px rgba(255,69,0,.5); }
  50%      { border-color: #ff7a1a; box-shadow: 0 0 18px rgba(255,120,0,.7); }
}

.detect-label {
  position: absolute;
  top: -22px; left: -2px;
  background: #ff4500;
  color: white;
  font-family: 'DM Mono', monospace;
  font-size: 10px; font-weight: 500;
  padding: 2px 7px;
  border-radius: 3px 3px 3px 0;
  white-space: nowrap;
}

/* Smoke detection box */
.smoke-box {
  position: absolute;
  border: 1.5px solid #f0a030;
  border-radius: 3px;
  animation: smokeBox 2s ease-in-out infinite;
}

@keyframes smokeBox {
  0%,100% { border-color:#f0a030; opacity:.9; }
  50% { border-color:#ffc55a; opacity:.6; }
}

.smoke-label {
  position: absolute; top:-20px; left:-1px;
  background:#f0a030; color:white;
  font-family:'DM Mono',monospace;
  font-size:10px; padding:2px 7px; border-radius:3px;
}

/* Scanline effect */
.scanline {
  position: absolute; inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 3px,
    rgba(255,255,255,.012) 4px
  );
  pointer-events: none;
}

/* Corner brackets */
.corner { position: absolute; width: 18px; height: 18px; }
.corner-tl { top:10px; left:10px; border-top:2px solid rgba(255,255,255,.3); border-left:2px solid rgba(255,255,255,.3); }
.corner-tr { top:10px; right:10px; border-top:2px solid rgba(255,255,255,.3); border-right:2px solid rgba(255,255,255,.3); }
.corner-bl { bottom:10px; left:10px; border-bottom:2px solid rgba(255,255,255,.3); border-left:2px solid rgba(255,255,255,.3); }
.corner-br { bottom:10px; right:10px; border-bottom:2px solid rgba(255,255,255,.3); border-right:2px solid rgba(255,255,255,.3); }

/* HUD info */
.hud-time {
  position: absolute; top:12px; right:16px;
  font-family:'DM Mono',monospace; font-size:11px;
  color:rgba(255,255,255,.55);
}

.hud-id {
  position: absolute; top:12px; left:16px;
  font-family:'DM Mono',monospace; font-size:11px;
  color:rgba(255,255,255,.55);
}

.hud-rec {
  position: absolute; bottom:12px; right:14px;
  display:flex; align-items:center; gap:5px;
  font-family:'DM Mono',monospace; font-size:10px;
  color:rgba(255,255,255,.5);
}
.rec-dot { width:7px; height:7px; border-radius:50%; background:#d92b2b;
  animation:blink .9s infinite; }

/* AI confidence HUD */
.hud-conf {
  position:absolute; bottom:12px; left:14px;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(6px);
  border:1px solid rgba(255,255,255,.1);
  border-radius:var(--r8);
  padding:8px 12px;
  font-family:'DM Mono',monospace;
  font-size:11px; color:white;
  min-width:160px;
}
.hud-conf-title { color:rgba(255,255,255,.5); font-size:9.5px; text-transform:uppercase; letter-spacing:1px; margin-bottom:4px; }
.hud-conf-row { display:flex; justify-content:space-between; align-items:center; margin-top:3px; }
.hud-conf-key { color:rgba(255,255,255,.6); font-size:10px; }
.hud-conf-val { font-size:11px; font-weight:500; }
.cv-fire   { color:#ff7a3a; }
.cv-smoke  { color:#ffc55a; }
.cv-temp   { color:#ff5555; }

/* â”€â”€ Cam info footer â”€â”€ */
.cam-footer {
  padding: 10px 14px;
  display:flex; align-items:center; gap:10px;
  border-top:1px solid var(--gray-100);
  background:var(--gray-50);
}

.cam-meta { font-size:12px; color:var(--gray-500); flex:1; }
.cam-meta strong { color:var(--red); }

.cam-ai-bar {
  display:flex; align-items:center; gap:8px;
}

.ai-score-label { font-size:11.5px; color:var(--gray-500); }
.ai-score-val {
  font-family:'DM Mono',monospace;
  font-size:13px; font-weight:500;
  color:var(--red);
}

.ai-bar-track {
  width:80px; height:5px;
  background:var(--gray-100);
  border-radius:3px; overflow:hidden;
}
.ai-bar-fill {
  height:100%; border-radius:3px;
  transition:width .5s ease;
}
.abf-fire  { background:linear-gradient(90deg,var(--red),#ff7a1a); }
.abf-watch { background:var(--amber); }
.abf-ok    { background:var(--green); }

/* â”€â”€ Grid of smaller cameras â”€â”€ */
.cam-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.mini-cam {
  background:var(--white);
  border:1px solid var(--gray-100);
  border-radius:var(--r12);
  overflow:hidden;
  cursor:pointer;
  transition:all .2s;
  box-shadow:var(--sh-xs);
}
.mini-cam:hover { transform:translateY(-2px); box-shadow:var(--sh-md); }
.mini-cam.mc-alert { border-color:#ffc89a; background:var(--amber-lt); }
.mini-cam.mc-alert:hover { border-color:var(--amber); }

.mini-cam-feed {
  aspect-ratio:16/9;
  position:relative;
  overflow:hidden;
}

.mcf-bg {
  position:absolute; inset:0;
}

.mcf-normal {
  background:linear-gradient(160deg, #111820 0%, #1a2535 60%, #0e1720 100%);
}

.mcf-watch {
  background:linear-gradient(160deg, #120e06 0%, #221508 60%, #160e03 100%);
}

/* mini tree silhouettes */
.mt-silhouette {
  position:absolute; bottom:0; left:0; right:0;
  height:50%;
  background:linear-gradient(0deg, rgba(8,20,10,.9) 0%, transparent 100%);
}

.mini-hud-time {
  position:absolute; top:5px; right:6px;
  font-family:'DM Mono',monospace; font-size:9px;
  color:rgba(255,255,255,.4);
}
.mini-hud-id {
  position:absolute; top:5px; left:6px;
  font-family:'DM Mono',monospace; font-size:9px;
  color:rgba(255,255,255,.4);
}
.mini-rec-dot {
  position:absolute; bottom:6px; right:6px;
  width:5px; height:5px; border-radius:50%;
  background:var(--red);
  animation:blink .9s infinite;
}

.mini-cam-info {
  padding:8px 10px;
  display:flex; align-items:center; gap:8px;
}
.mi-name { font-size:12px; font-weight:600; color:var(--gray-900); }
.mi-loc  { font-size:10.5px; color:var(--gray-500); margin-top:1px; }
.mi-score {
  margin-left:auto;
  font-family:'DM Mono',monospace;
  font-size:12px; font-weight:500;
}
.ms-ok    { color:var(--green); }
.ms-watch { color:var(--amber); }

/* small amber detection box in mini feed */
.mini-detect {
  position:absolute;
  border:1.5px solid var(--amber);
  border-radius:2px;
  animation:smokeBox 2s ease-in-out infinite;
}
.mini-detect-label {
  position:absolute; top:-16px; left:0;
  background:var(--amber); color:white;
  font-family:'DM Mono',monospace; font-size:8.5px;
  padding:1px 5px; border-radius:2px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RIGHT PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.right-panel {
  background:var(--white);
  border-left:1px solid var(--gray-100);
  overflow-y:auto;
  display:flex; flex-direction:column;
}

.rp-section {
  padding:16px 18px;
  border-bottom:1px solid var(--gray-100);
}

.rp-title {
  font-family:'DM Mono',monospace;
  font-size:10px; text-transform:uppercase;
  letter-spacing:1.5px; color:var(--gray-300);
  margin-bottom:14px;
}

/* â”€â”€ Dispatch panel â”€â”€ */
.dispatch-alert {
  background: linear-gradient(135deg, var(--red-lt), #fff8f8);
  border: 1.5px solid var(--red-bd);
  border-radius: var(--r12);
  padding: 14px 16px;
  margin-bottom: 14px;
}

.da-header {
  display:flex; align-items:center; gap:8px;
  margin-bottom:8px;
}

.da-badge {
  background:var(--red); color:white;
  font-size:10px; font-weight:700;
  padding:2px 8px; border-radius:var(--r4);
  letter-spacing:.4px;
  animation:badgePulse 1.4s ease-in-out infinite;
}

.da-title { font-size:14px; font-weight:700; color:var(--gray-900); }

.da-info {
  font-size:12px; color:var(--gray-700);
  line-height:1.7;
}
.da-info strong { color:var(--red); }

/* Agency dispatch buttons */
.agency-dispatch {
  display:flex; flex-direction:column; gap:8px;
}

.agency-btn {
  display:flex; align-items:center; gap:12px;
  padding:12px 14px;
  border-radius:var(--r12);
  border: 2px solid;
  cursor:pointer;
  transition:all .2s;
  text-align:left;
  font-family:'Noto Sans KR',sans-serif;
  width:100%;
}

.ab-forest {
  background:var(--white);
  border-color:var(--gray-200);
  color:var(--gray-900);
}
.ab-forest:hover {
  border-color:var(--forest);
  background:#f0faf4;
  box-shadow:0 4px 14px rgba(26,122,67,.15);
  transform:translateY(-1px);
}

.ab-fire {
  background:var(--red);
  border-color:var(--red);
  color:white;
  box-shadow:0 4px 14px rgba(217,43,43,.35);
  animation:dispatchPulse 2s ease-in-out infinite;
}
.ab-fire:hover {
  background:#b82424;
  transform:translateY(-1px);
  box-shadow:0 6px 20px rgba(217,43,43,.5);
}
@keyframes dispatchPulse {
  0%,100%{box-shadow:0 4px 14px rgba(217,43,43,.35);}
  50%{box-shadow:0 4px 24px rgba(217,43,43,.55);}
}

.ab-police {
  background:var(--white);
  border-color:var(--gray-200);
  color:var(--gray-900);
}
.ab-police:hover {
  border-color:var(--police);
  background:#f0f4ff;
  box-shadow:0 4px 14px rgba(18,81,201,.12);
  transform:translateY(-1px);
}

.agency-icon {
  width:40px; height:40px;
  border-radius:var(--r8);
  display:flex; align-items:center; justify-content:center;
  font-size:20px; flex-shrink:0;
}

.ai-forest { background:rgba(26,122,67,.1); }
.ai-fire   { background:rgba(255,255,255,.18); }
.ai-police { background:rgba(18,81,201,.08); }

.agency-info { flex:1; }
.agency-name { font-size:14px; font-weight:700; }
.ab-fire .agency-name { color:white; }
.agency-tel {
  font-family:'DM Mono',monospace;
  font-size:11.5px; margin-top:1px;
}
.ab-fire .agency-tel { color:rgba(255,255,255,.7); }
.agency-tel:not(.ab-fire *) { color:var(--gray-500); }

.agency-status {
  font-size:11px; font-weight:600;
  padding:3px 8px; border-radius:20px;
}
.as-ready  { background:var(--green-lt); color:var(--green); }
.as-going  { background:#fff0e8; color:var(--amber); }
.as-alert  { background:rgba(255,255,255,.2); color:white; }

/* â”€â”€ AI confidence meter â”€â”€ */
.conf-section { }

.conf-big {
  display:flex; align-items:center; gap:14px;
  margin-bottom:14px;
}

.conf-ring {
  position:relative; width:68px; height:68px; flex-shrink:0;
}
.conf-ring svg { width:68px; height:68px; transform:rotate(-90deg); }
.cr-track { fill:none; stroke:var(--gray-100); stroke-width:6; }
.cr-fill-fire  { fill:none; stroke:var(--red); stroke-width:6; stroke-linecap:round;
  stroke-dasharray:176; stroke-dashoffset:11; }
.cr-fill-watch { fill:none; stroke:var(--amber); stroke-width:6; stroke-linecap:round;
  stroke-dasharray:176; stroke-dashoffset:88; }

.conf-ring-inner {
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
}
.cri-pct { font-family:'DM Mono',monospace; font-size:15px; font-weight:500; }
.cri-pct.fire  { color:var(--red); }
.cri-pct.watch { color:var(--amber); }
.cri-sub { font-size:9px; color:var(--gray-400); }

.conf-text { flex:1; }
.conf-verdict { font-size:13px; font-weight:700; }
.conf-verdict.fire  { color:var(--red); }
.conf-verdict.watch { color:var(--amber); }
.conf-detail { font-size:11.5px; color:var(--gray-500); margin-top:3px; line-height:1.6; }

.metric-list { display:flex; flex-direction:column; gap:9px; }

.metric-row {
  display:flex; flex-direction:column; gap:3px;
}
.metric-top { display:flex; justify-content:space-between; }
.metric-key { font-size:12px; color:var(--gray-500); }
.metric-val { font-family:'DM Mono',monospace; font-size:12px; font-weight:500; }
.mv-red   { color:var(--red); }
.mv-amber { color:var(--amber); }
.mv-green { color:var(--green); }
.mv-blue  { color:var(--blue); }

.bar-track { height:3px; background:var(--gray-100); border-radius:2px; overflow:hidden; }
.bar-fill  { height:100%; border-radius:2px; transition:width .5s ease; }
.bf-red   { background:var(--red); }
.bf-amber { background:var(--amber); }
.bf-green { background:var(--green); }
.bf-blue  { background:var(--blue); }

/* â”€â”€ Location map mini â”€â”€ */
.mini-map {
  background:#eef0f6;
  border:1px solid var(--gray-100);
  border-radius:var(--r12);
  overflow:hidden;
  position:relative;
}

/* â”€â”€ Timeline events â”€â”€ */
.event-list { display:flex; flex-direction:column; gap:0; }

.event-item {
  display:flex; align-items:flex-start; gap:10px;
  padding:9px 0;
  border-bottom:1px solid var(--gray-100);
  position:relative;
}
.event-item:last-child { border-bottom:none; padding-bottom:0; }
.event-item:first-child { padding-top:0; }

.ev-dot-wrap {
  display:flex; flex-direction:column; align-items:center;
  padding-top:3px;
}
.ev-dot {
  width:9px; height:9px; border-radius:50%;
  flex-shrink:0;
}
.ev-dot.red    { background:var(--red); }
.ev-dot.amber  { background:var(--amber); }
.ev-dot.green  { background:var(--green); }
.ev-dot.blue   { background:var(--blue); }
.ev-dot.gray   { background:var(--gray-300); }

.ev-content { flex:1; }
.ev-title   { font-size:12.5px; font-weight:600; color:var(--gray-900); }
.ev-sub     { font-size:11.5px; color:var(--gray-500); margin-top:1px; line-height:1.5; }
.ev-time    { font-family:'DM Mono',monospace; font-size:10.5px; color:var(--gray-300); white-space:nowrap; margin-top:2px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE 2 â€” AI ANALYSIS (if shown)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ai-page {
  padding:28px;
  max-width:1280px;
  margin:0 auto;
  padding-bottom:60px;
}

.kpi-row {
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:14px;
  margin-bottom:24px;
}

.kpi-card {
  background:var(--white);
  border:1px solid var(--gray-100);
  border-radius:var(--r16);
  padding:20px 22px;
  box-shadow:var(--sh-sm);
  transition:all .2s;
}
.kpi-card:hover { box-shadow:var(--sh-md); }

.kpi-label { font-size:11.5px; color:var(--gray-500); font-weight:500; margin-bottom:8px; }
.kpi-value {
  font-family:'DM Sans',sans-serif;
  font-size:30px; font-weight:700;
  letter-spacing:-1px; line-height:1;
}
.kv-red   { color:var(--red); }
.kv-green { color:var(--green); }
.kv-amber { color:var(--amber); }
.kv-blue  { color:var(--blue); }
.kv-dark  { color:var(--gray-900); }

.kpi-delta { font-size:12px; color:var(--gray-400); margin-top:6px; }
.kd-up   { color:var(--green); }
.kd-down { color:var(--red); }

/* Pipeline */
.pipeline-card {
  background:var(--white);
  border:1px solid var(--gray-100);
  border-radius:var(--r16);
  padding:26px 28px;
  margin-bottom:20px;
  box-shadow:var(--sh-sm);
}

.card-title {
  font-family:'DM Sans',sans-serif;
  font-size:18px; font-weight:700;
  letter-spacing:-.3px; color:var(--gray-900);
  margin-bottom:4px;
}
.card-title span { color:var(--amber); }
.card-sub { font-size:12.5px; color:var(--gray-500); margin-bottom:22px; }

.pipe-steps {
  display:flex; align-items:flex-start; gap:0;
  position:relative;
}
.pipe-steps::before {
  content:''; position:absolute;
  top:21px; left:21px; right:21px; height:2px;
  background:var(--gray-100); z-index:0;
}

.ps {
  display:flex; flex-direction:column;
  align-items:center; gap:9px; flex:1;
  position:relative; z-index:1;
}

.ps-icon {
  width:42px; height:42px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  font-size:16px; border:2.5px solid;
  background:var(--white);
}
.ps.done .ps-icon   { background:var(--gray-900); border-color:var(--gray-900); }
.ps.active .ps-icon { background:var(--amber-lt); border-color:var(--amber); animation:stepGlow 2s ease-in-out infinite; }
.ps.todo .ps-icon   { background:var(--gray-50); border-color:var(--gray-200); opacity:.5; }
@keyframes stepGlow {
  0%,100%{box-shadow:0 0 0 0 rgba(232,101,10,.3);}
  50%{box-shadow:0 0 0 7px rgba(232,101,10,0);}
}

.ps-name { font-size:11.5px; font-weight:600; color:var(--gray-700); text-align:center; }
.ps-sub  { font-size:10px; color:var(--gray-400); font-family:'DM Mono',monospace; text-align:center; margin-top:-4px; }
.ps.done .ps-name   { color:var(--gray-900); }
.ps.active .ps-name { color:var(--amber); }

/* Model cards */
.model-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-bottom:20px; }

.model-card {
  background:var(--white);
  border:1px solid var(--gray-100);
  border-radius:var(--r16);
  padding:22px;
  box-shadow:var(--sh-sm);
  position:relative;
  overflow:hidden;
  transition:all .2s;
}
.model-card::before { content:''; position:absolute; top:0;left:0;right:0; height:3px; }
.model-card.mc-r::before { background:linear-gradient(90deg,var(--red),#ff6060); }
.model-card.mc-a::before { background:linear-gradient(90deg,var(--amber),#ffd040); }
.model-card.mc-b::before { background:linear-gradient(90deg,var(--blue),#5b8aff); }
.model-card:hover { transform:translateY(-2px); box-shadow:var(--sh-md); }

.mc-head { display:flex; align-items:flex-start; gap:11px; margin-bottom:18px; }
.mc-icon {
  width:38px; height:38px; border-radius:var(--r8);
  display:flex; align-items:center; justify-content:center;
  font-size:17px; flex-shrink:0;
}
.mci-r { background:var(--red-lt); }
.mci-a { background:var(--amber-lt); }
.mci-b { background:var(--blue-lt); }

.mc-title { font-size:14px; font-weight:700; color:var(--gray-900); }
.mc-sub   { font-size:11.5px; color:var(--gray-500); margin-top:2px; }

.mc-metrics { display:flex; flex-direction:column; gap:0; }
.mc-row {
  display:flex; justify-content:space-between;
  padding:7px 0; border-bottom:1px solid var(--gray-50);
}
.mc-row:last-child { border-bottom:none; padding-bottom:0; }
.mc-row:first-child { padding-top:0; }
.mc-key { font-size:12px; color:var(--gray-500); }
.mc-val { font-family:'DM Mono',monospace; font-size:12.5px; font-weight:500; color:var(--gray-900); }
.mc-val.vg { color:var(--green); }
.mc-val.va { color:var(--amber); }
.mc-val.vb { color:var(--blue); }

/* Preproc cards */
.prep-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; }

.prep-card {
  background:var(--white);
  border:1.5px solid var(--gray-100);
  border-radius:var(--r12);
  padding:18px;
  transition:all .2s;
}
.prep-card:hover { border-color:var(--gray-300); transform:translateY(-2px); box-shadow:var(--sh-sm); }

.prep-num  { font-family:'DM Mono',monospace; font-size:10px; color:var(--gray-300); margin-bottom:10px; }
.prep-icon { font-size:22px; margin-bottom:12px; display:block; }
.prep-title{ font-size:13.5px; font-weight:700; color:var(--gray-900); margin-bottom:7px; }
.prep-desc { font-size:12px; color:var(--gray-500); line-height:1.65; }
.prep-tag  {
  margin-top:10px; display:inline-block;
  padding:3px 10px; border-radius:var(--r4);
  font-family:'DM Mono',monospace; font-size:11px; font-weight:500;
}

/* Scrollbar */
::-webkit-scrollbar { width:4px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--gray-200); border-radius:2px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ALARM SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ Full-screen flash overlay (fire) â”€â”€ */
.alarm-flash-overlay {
  position: fixed; inset: 0;
  pointer-events: none;
  z-index: 9000;
  opacity: 0;
}
.alarm-flash-overlay.fire-active {
  background: rgba(217, 43, 43, 0.18);
  animation: screenFlash 1.1s ease-in-out infinite;
}
.alarm-flash-overlay.smoke-active {
  background: rgba(232, 101, 10, 0.12);
  animation: screenFlashAmber 1.6s ease-in-out infinite;
}
@keyframes screenFlash {
  0%,100% { opacity: 0; }
  50%      { opacity: 1; }
}
@keyframes screenFlashAmber {
  0%,100% { opacity: 0; }
  50%      { opacity: 1; }
}

/* â”€â”€ Topbar alarm bar (replaces normal topbar bg) â”€â”€ */
.topbar.alarm-fire {
  animation: topbarAlarm 1.1s ease-in-out infinite;
}
@keyframes topbarAlarm {
  0%,100% { background: var(--gray-900); }
  50%      { background: #7a0f0f; }
}
.topbar.alarm-smoke {
  animation: topbarSmoke 1.6s ease-in-out infinite;
}
@keyframes topbarSmoke {
  0%,100% { background: var(--gray-900); }
  50%      { background: #5a2a00; }
}

/* â”€â”€ ALARM BANNER (top full-width below topbar) â”€â”€ */
.alarm-banner {
  position: fixed;
  top: 54px; left: 0; right: 0;
  z-index: 800;
  display: flex;
  align-items: stretch;
  overflow: hidden;
  box-shadow: 0 4px 24px rgba(0,0,0,.25);
  transform: translateY(-100%);
  transition: transform .3s cubic-bezier(.22,1,.36,1);
}
.alarm-banner.visible { transform: translateY(0); }

.alarm-banner-fire {
  background: var(--red);
}
.alarm-banner-smoke {
  background: var(--amber);
}

.ab-icon {
  display: flex; align-items: center; justify-content: center;
  padding: 0 22px;
  background: rgba(0,0,0,.2);
  font-size: 28px;
}

.ab-body {
  flex: 1;
  padding: 12px 18px;
}

.ab-title {
  font-family: 'DM Sans', sans-serif;
  font-size: 17px; font-weight: 700;
  color: white; letter-spacing: -.2px;
  display: flex; align-items: center; gap: 10px;
  line-height: 1.2;
}

.ab-title .ab-blink {
  display: inline-block;
  animation: textBlink .7s step-end infinite;
}
@keyframes textBlink {
  0%,100% { opacity: 1; }
  50%      { opacity: 0; }
}

.ab-meta {
  font-size: 13px; color: rgba(255,255,255,.85);
  margin-top: 3px;
}

.ab-time {
  font-family: 'DM Mono', monospace;
  font-size: 12px; color: rgba(255,255,255,.65);
  margin-top: 2px;
}

.ab-actions {
  display: flex; align-items: center; gap: 8px;
  padding: 0 18px;
}

.ab-btn {
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 13px; font-weight: 700;
  cursor: pointer; border: none;
  font-family: 'Noto Sans KR', sans-serif;
  transition: all .15s;
  white-space: nowrap;
}

.ab-btn-primary {
  background: white;
  color: var(--red);
}
.ab-btn-primary:hover { background: #f5f5f5; transform: scale(1.02); }

.ab-btn-secondary {
  background: rgba(255,255,255,.2);
  color: white;
  border: 1px solid rgba(255,255,255,.4);
}
.ab-btn-secondary:hover { background: rgba(255,255,255,.3); }

.ab-btn-dismiss {
  background: transparent;
  color: rgba(255,255,255,.6);
  border: 1px solid rgba(255,255,255,.25);
  font-size: 12px;
}
.ab-btn-dismiss:hover { background: rgba(0,0,0,.15); color: white; }

.ab-btn-amber {
  color: var(--amber);
}

/* â”€â”€ Alarm counter badge on topbar â”€â”€ */
.alarm-count-badge {
  min-width: 20px; height: 20px;
  background: var(--red);
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 700; color: white;
  padding: 0 5px;
  animation: badgePulse 1.2s ease-in-out infinite;
}

/* â”€â”€ Notification toast stack (bottom-right) â”€â”€ */
.toast-stack {
  position: fixed;
  bottom: 24px; right: 24px;
  z-index: 8500;
  display: flex; flex-direction: column; gap: 10px;
  pointer-events: none;
  align-items: flex-end;
}

.toast {
  background: var(--white);
  border-radius: 14px;
  box-shadow: var(--sh-lg), 0 0 0 1px rgba(18,33,58,.06);
  overflow: hidden;
  min-width: 320px; max-width: 380px;
  pointer-events: all;
  animation: toastSlide .35s cubic-bezier(.22,1,.36,1);
  position: relative;
}
@keyframes toastSlide {
  from { transform: translateX(120%); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}
.toast.toast-exit {
  animation: toastExit .3s ease forwards;
}
@keyframes toastExit {
  to { transform: translateX(120%); opacity: 0; }
}

.toast-stripe {
  height: 4px;
}
.ts-fire  { background: linear-gradient(90deg, var(--red), #ff7070); }
.ts-smoke { background: linear-gradient(90deg, var(--amber), #ffd060); }

.toast-inner {
  padding: 14px 16px 12px;
}

.toast-header {
  display: flex; align-items: center; gap: 10px;
  margin-bottom: 8px;
}

.toast-icon {
  width: 36px; height: 36px;
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; flex-shrink: 0;
}
.ti-fire  { background: var(--red-lt); animation: iconPop .6s ease-in-out infinite alternate; }
.ti-smoke { background: var(--amber-lt); }
@keyframes iconPop {
  from { transform: scale(1); }
  to   { transform: scale(1.12); }
}

.toast-title {
  font-size: 14px; font-weight: 700;
  color: var(--gray-900); line-height: 1.2;
  flex: 1;
}
.toast-title.tt-fire  { color: var(--red); }
.toast-title.tt-smoke { color: var(--amber); }

.toast-close {
  width: 24px; height: 24px;
  border-radius: 6px; border: none;
  background: var(--gray-100);
  color: var(--gray-500);
  cursor: pointer; font-size: 12px;
  display: flex; align-items: center; justify-content: center;
  transition: all .15s;
}
.toast-close:hover { background: var(--gray-200); color: var(--gray-900); }

.toast-body {
  font-size: 12.5px; color: var(--gray-700);
  line-height: 1.65; margin-bottom: 10px;
}
.toast-body strong { color: var(--gray-900); }

.toast-conf-bar {
  height: 3px; background: var(--gray-100);
  border-radius: 2px; overflow: hidden; margin-bottom: 10px;
}
.tcb-fill {
  height: 100%; border-radius: 2px;
  transition: width 1s ease;
}
.tcb-fire  { background: linear-gradient(90deg, var(--red), #ff7070); }
.tcb-smoke { background: var(--amber); }

.toast-footer {
  display: flex; gap: 6px;
}

.tf-btn {
  flex: 1; padding: 7px 0;
  border-radius: 8px; border: none;
  font-size: 12.5px; font-weight: 600;
  cursor: pointer; font-family: 'Noto Sans KR', sans-serif;
  transition: all .15s;
}
.tf-primary {
  background: var(--red); color: white;
}
.tf-primary:hover { background: #b82020; }
.tf-primary.amber-bg { background: var(--amber); }
.tf-primary.amber-bg:hover { background: #c4540a; }
.tf-secondary {
  background: var(--gray-100); color: var(--gray-700);
  flex: 0.6;
}
.tf-secondary:hover { background: var(--gray-200); }

/* â”€â”€ Alarm counter progress ring on cam thumbnail â”€â”€ */
.cam-alarm-ring {
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  pointer-events: none;
}

/* â”€â”€ Featured cam border pulse stronger â”€â”€ */
.featured-cam.alarm-on {
  animation: camBorderPulse 1.1s ease-in-out infinite !important;
}
@keyframes camBorderPulse {
  0%,100% { box-shadow: 0 0 0 4px rgba(217,43,43,.1), 0 0 0 8px rgba(217,43,43,.04); border-color: #f5b8b8; }
  50%      { box-shadow: 0 0 0 8px rgba(217,43,43,.25), 0 0 0 16px rgba(217,43,43,.08); border-color: var(--red); }
}

/* Push content down when banner visible */
.layout.banner-pushed {
  margin-top: 0;
}
.page.banner-pushed .layout {
  height: calc(100vh - 54px - 62px);
}


/* Page hide/show */
.page { display:none; }
.page.on { display:block; animation:pIn .25s ease; }
@keyframes pIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
</style>
</head>
<body>

<!-- Screen flash overlay -->
<div class="alarm-flash-overlay" id="flashOverlay"></div>

<!-- Alarm banner -->
<div class="alarm-banner alarm-banner-fire" id="alarmBanner">
  <div class="ab-icon">ğŸ”¥</div>
  <div class="ab-body">
    <div class="ab-title">
      <span class="ab-blink">âš </span>&nbsp;
      ì‚°ë¶ˆ ë°œí™” ê°ì§€ â€” CAM-07
    </div>
    <div class="ab-meta">ê°•ì›ë„ ì‚¼ì²™ì‹œ ë„ê³„ì ì‚° 23ë²ˆì§€ &nbsp;Â·&nbsp; AI ì‹ ë¢°ë„ <strong style="color:white;font-weight:800;">94.2%</strong></div>
    <div class="ab-time">ê°ì§€ ì‹œê°: 14:22:51 &nbsp;Â·&nbsp; ê²½ê³¼: <span id="elapsedTime">0ì´ˆ</span></div>
  </div>
  <div class="ab-actions">
    <button class="ab-btn ab-btn-primary" onclick="dispatchFromBanner('fire')">ğŸš’ ì†Œë°©ì„œ ì¶œë™</button>
    <button class="ab-btn ab-btn-secondary" onclick="dispatchFromBanner('forest')">ğŸŒ² ì‚°ë¦¼ì²­ ì¶œë™</button>
    <button class="ab-btn ab-btn-dismiss" onclick="dismissBanner()">âœ• í™•ì¸</button>
  </div>
</div>

<!-- Toast notification stack -->
<div class="toast-stack" id="toastStack"></div>

<!-- â•â•â•â•â•â•â•â• TOPBAR â•â•â•â•â•â•â•â• -->
<header class="topbar alarm-fire" id="topbarEl">
  <div class="brand">
    <div class="brand-flame">ğŸ”¥</div>
    <span class="brand-text">Pyro<em>Guard</em></span>
  </div>

  <nav class="topbar-tabs">
    <button class="ttab on" onclick="switchTab('dash',this)">ğŸ¥ CCTV ëª¨ë‹ˆí„°ë§</button>
    <button class="ttab" onclick="switchTab('ai',this)">ğŸ§  AI ë¶„ì„</button>
  </nav>

  <div class="topbar-right">
    <div class="live-pill">
      <div class="live-dot"></div>
      LIVE Â· ì¹´ë©”ë¼ 12ëŒ€
    </div>
    <div class="alert-pill" onclick="switchTab('dash',document.querySelectorAll('.ttab')[0])">
      <div class="alert-dot"></div>
      í™”ì¬ ê°ì§€ â€” CAM-07
    </div>
    <div class="tb-clock" id="clock">--:--:--</div>
  </div>
</header>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 1 Â· CCTV DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page on" id="page-dash">
<div class="layout" id="mainLayout">

  <!-- Sub-bar -->
  <div class="subbar">
    <span class="subbar-label">ê°ì‹œ í˜„í™©</span>
    <div class="vdiv"></div>
    <div class="subbar-stat s-red"><span>â—</span>&nbsp;<strong>1ê±´</strong> í™”ì¬ ê°ì§€</div>
    <div class="subbar-stat s-amber"><span>â—</span>&nbsp;<strong>1ê±´</strong> ì—°ê¸° ì˜ì‹¬</div>
    <div class="subbar-stat"><strong>10ëŒ€</strong> ì •ìƒ ê°ì‹œ ì¤‘</div>
    <div class="vdiv"></div>
    <div class="subbar-stat">AI ëª¨ë¸ <strong>v2.4.1</strong> ê°€ë™ ì¤‘</div>
    <div class="subbar-right">
      <button class="sm-btn">ì „ì²´í™”ë©´</button>
      <button class="sm-btn">ë ˆì´ì•„ì›ƒ</button>
    </div>
  </div>

  <!-- CCTV Area -->
  <main class="cctv-area">

    <!-- â”€â”€ FEATURED: Fire detected â”€â”€ -->
    <div class="featured-cam" data-camid="07">
      <div class="cam-header">
        <span class="cam-id">CAM-07</span>
        <span class="cam-badge cb-fire">ğŸ”´ í™”ì¬ ê°ì§€</span>
        <span class="cam-loc">ê°•ì›ë„ ì‚¼ì²™ì‹œ ë„ê³„ì ì‚° 23ë²ˆì§€</span>
        <div class="cam-actions">
          <button class="cam-act-btn">ğŸ”Š ì•Œë¦¼</button>
          <button class="cam-act-btn">ğŸ“¸ ìº¡ì²˜</button>
          <button class="cam-act-btn expand">â›¶ ì „ì²´í™”ë©´</button>
        </div>
      </div>

      <!-- CCTV feed simulation -->
      <div class="cam-feed">
        <div class="cam-feed-bg"></div>

        <!-- Forest scene -->
        <div class="scene-trees"></div>

        <!-- Tree shapes -->
        <div class="scene-tree" style="left:5%;bottom:0;border-left-width:18px;border-right-width:18px;border-bottom-width:80px;border-bottom-color:rgba(8,30,12,.85);"></div>
        <div class="scene-tree" style="left:11%;bottom:0;border-left-width:14px;border-right-width:14px;border-bottom-width:65px;border-bottom-color:rgba(10,35,14,.8);"></div>
        <div class="scene-tree" style="left:17%;bottom:0;border-left-width:20px;border-right-width:20px;border-bottom-width:90px;border-bottom-color:rgba(6,25,10,.9);"></div>
        <div class="scene-tree" style="left:24%;bottom:0;border-left-width:15px;border-right-width:15px;border-bottom-width:70px;border-bottom-color:rgba(8,28,12,.85);"></div>
        <div class="scene-tree" style="left:31%;bottom:0;border-left-width:22px;border-right-width:22px;border-bottom-width:95px;border-bottom-color:rgba(7,22,10,.9);"></div>
        <div class="scene-tree" style="left:62%;bottom:0;border-left-width:16px;border-right-width:16px;border-bottom-width:72px;border-bottom-color:rgba(8,28,12,.85);"></div>
        <div class="scene-tree" style="left:70%;bottom:0;border-left-width:20px;border-right-width:20px;border-bottom-width:85px;border-bottom-color:rgba(6,24,10,.9);"></div>
        <div class="scene-tree" style="left:78%;bottom:0;border-left-width:15px;border-right-width:15px;border-bottom-width:68px;border-bottom-color:rgba(9,30,12,.8);"></div>
        <div class="scene-tree" style="left:85%;bottom:0;border-left-width:18px;border-right-width:18px;border-bottom-width:78px;border-bottom-color:rgba(7,26,10,.85);"></div>
        <div class="scene-tree" style="left:92%;bottom:0;border-left-width:13px;border-right-width:13px;border-bottom-width:60px;border-bottom-color:rgba(8,28,12,.8);"></div>

        <!-- Fire simulation -->
        <div class="fire-sim">
          <!-- Smoke particles -->
          <div class="smoke-particle" style="width:20px;height:20px;left:-10px;animation-duration:3s;animation-delay:0s;"></div>
          <div class="smoke-particle" style="width:14px;height:14px;left:5px;animation-duration:2.5s;animation-delay:.6s;"></div>
          <div class="smoke-particle" style="width:25px;height:25px;left:-20px;animation-duration:3.5s;animation-delay:1.1s;"></div>
          <div class="smoke-particle" style="width:18px;height:18px;left:15px;animation-duration:2.8s;animation-delay:1.8s;"></div>
          <div class="smoke-particle" style="width:12px;height:12px;left:-5px;animation-duration:2.2s;animation-delay:2.3s;"></div>

          <!-- Flame SVG -->
          <svg class="flame-svg" width="48" height="60" viewBox="0 0 48 60">
            <defs>
              <radialGradient id="fg1" cx="50%" cy="80%">
                <stop offset="0%" stop-color="#fff700"/>
                <stop offset="40%" stop-color="#ff8c00"/>
                <stop offset="100%" stop-color="#cc2200" stop-opacity="0"/>
              </radialGradient>
            </defs>
            <ellipse cx="24" cy="55" rx="20" ry="6" fill="rgba(255,80,0,.3)"/>
            <path d="M24 0 C18 15, 8 18, 10 32 C11 42, 16 50, 24 56 C32 50, 37 42, 38 32 C40 18, 30 15, 24 0Z" fill="url(#fg1)" opacity="0.9"/>
            <path d="M24 12 C20 22, 14 24, 16 34 C17 40, 20 46, 24 50 C28 46, 31 40, 32 34 C34 24, 28 22, 24 12Z" fill="#ffdd00" opacity="0.7"/>
          </svg>
        </div>

        <!-- AI Detection overlays -->
        <div class="ai-overlay">
          <!-- Fire bounding box -->
          <div class="detect-box" style="left:40%;top:35%;width:22%;height:35%;">
            <div class="detect-label">FIRE 94.2%</div>
          </div>

          <!-- Smoke bounding box (larger) -->
          <div class="smoke-box" style="left:32%;top:15%;width:38%;height:55%;">
            <div class="smoke-label">SMOKE 87.6%</div>
          </div>
        </div>

        <!-- Scanlines -->
        <div class="scanline"></div>

        <!-- Corner brackets -->
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>

        <!-- HUD elements -->
        <div class="hud-id">CAM-07 Â· 1080p</div>
        <div class="hud-time" id="hud-time">14:23:07</div>

        <div class="hud-rec">
          <div class="rec-dot"></div>
          REC
        </div>

        <!-- AI confidence HUD -->
        <div class="hud-conf">
          <div class="hud-conf-title">AI Detection</div>
          <div class="hud-conf-row">
            <span class="hud-conf-key">í™”ì¬</span>
            <span class="hud-conf-val cv-fire">94.2%</span>
          </div>
          <div class="hud-conf-row">
            <span class="hud-conf-key">ì—°ê¸°</span>
            <span class="hud-conf-val cv-smoke">87.6%</span>
          </div>
          <div class="hud-conf-row">
            <span class="hud-conf-key">ì˜¨ë„</span>
            <span class="hud-conf-val cv-temp">89Â°C</span>
          </div>
        </div>
      </div>

      <div class="cam-footer">
        <div class="cam-meta">
          ìµœì´ˆ ê°ì§€: <strong>14:22:51</strong> &nbsp;Â·&nbsp;
          ì¢Œí‘œ: 37.284Â°N, 129.011Â°E &nbsp;Â·&nbsp;
          AI íŒì •: <strong>ì‚°ë¶ˆ ë°œí™” (CRITICAL)</strong>
        </div>
        <div class="cam-ai-bar">
          <span class="ai-score-label">ì‹ ë¢°ë„</span>
          <div class="ai-bar-track">
            <div class="ai-bar-fill abf-fire" style="width:94%"></div>
          </div>
          <span class="ai-score-val">94.2%</span>
        </div>
      </div>
    </div>

    <!-- â”€â”€ Mini camera grid â”€â”€ -->
    <div class="cam-grid">

      <!-- CAM-03: Watch -->
      <div class="mini-cam mc-alert" data-camid="03" onclick="swapToMain(this)">
        <div class="mini-cam-feed">
          <div class="mcf-bg mcf-watch"></div>
          <div class="mt-silhouette"></div>
          <div class="mini-detect" style="left:35%;top:25%;width:30%;height:40%;">
            <div class="mini-detect-label">SMOKE 62%</div>
          </div>
          <div class="mini-hud-id">CAM-03</div>
          <div class="mini-hud-time" id="hud3">14:23:07</div>
          <div class="mini-rec-dot"></div>
        </div>
        <div class="mini-cam-info">
          <div>
            <div class="mi-name">CAM-03</div>
            <div class="mi-loc">ê²½ë¶ ì•ˆë™ ê¸¸ì•ˆë©´</div>
          </div>
          <span class="cam-badge cb-watch" style="font-size:10px;">ì—°ê¸° ì˜ì‹¬</span>
          <div class="mi-score ms-watch">62%</div>
        </div>
      </div>

      <!-- CAM-01 normal -->
      <div class="mini-cam" data-camid="01" onclick="swapToMain(this)">
        <div class="mini-cam-feed">
          <div class="mcf-bg mcf-normal"></div>
          <div class="mt-silhouette"></div>
          <div class="mini-hud-id">CAM-01</div>
          <div class="mini-hud-time" id="hud1">14:23:07</div>
          <div class="mini-rec-dot"></div>
        </div>
        <div class="mini-cam-info">
          <div>
            <div class="mi-name">CAM-01</div>
            <div class="mi-loc">ê²½ê¸° ê°€í‰ ë¶ë©´</div>
          </div>
          <span class="cam-badge cb-normal">ì •ìƒ</span>
          <div class="mi-score ms-ok">0.3%</div>
        </div>
      </div>

      <!-- CAM-02 normal -->
      <div class="mini-cam" data-camid="02" onclick="swapToMain(this)">
        <div class="mini-cam-feed">
          <div class="mcf-bg mcf-normal" style="background:linear-gradient(160deg,#0e1a28 0%,#1a2a38 60%,#0c1620 100%);"></div>
          <div class="mt-silhouette"></div>
          <div class="mini-hud-id">CAM-02</div>
          <div class="mini-hud-time" id="hud2">14:23:07</div>
          <div class="mini-rec-dot"></div>
        </div>
        <div class="mini-cam-info">
          <div>
            <div class="mi-name">CAM-02</div>
            <div class="mi-loc">ê°•ì› ì›ì£¼ ë¬¸ë§‰</div>
          </div>
          <span class="cam-badge cb-normal">ì •ìƒ</span>
          <div class="mi-score ms-ok">1.1%</div>
        </div>
      </div>

      <!-- CAM-04 normal -->
      <div class="mini-cam" data-camid="04" onclick="swapToMain(this)">
        <div class="mini-cam-feed">
          <div class="mcf-bg mcf-normal" style="background:linear-gradient(160deg,#0f1a10 0%,#182518 60%,#0c1a0d 100%);"></div>
          <div class="mt-silhouette"></div>
          <div class="mini-hud-id">CAM-04</div>
          <div class="mini-hud-time" id="hud4">14:23:07</div>
          <div class="mini-rec-dot"></div>
        </div>
        <div class="mini-cam-info">
          <div>
            <div class="mi-name">CAM-04</div>
            <div class="mi-loc">ì¶©ë¶ ì œì²œ ë•ì‚°</div>
          </div>
          <span class="cam-badge cb-normal">ì •ìƒ</span>
          <div class="mi-score ms-ok">0.7%</div>
        </div>
      </div>

      <!-- CAM-05 normal -->
      <div class="mini-cam" data-camid="05" onclick="swapToMain(this)">
        <div class="mini-cam-feed">
          <div class="mcf-bg mcf-normal" style="background:linear-gradient(160deg,#0e1822 0%,#18242e 60%,#0c1620 100%);"></div>
          <div class="mt-silhouette"></div>
          <div class="mini-hud-id">CAM-05</div>
          <div class="mini-hud-time" id="hud5">14:23:07</div>
          <div class="mini-rec-dot"></div>
        </div>
        <div class="mini-cam-info">
          <div>
            <div class="mi-name">CAM-05</div>
            <div class="mi-loc">ì „ë‚¨ ê´‘ì–‘ ë´‰ê°•</div>
          </div>
          <span class="cam-badge cb-normal">ì •ìƒ</span>
          <div class="mi-score ms-ok">2.2%</div>
        </div>
      </div>

      <!-- CAM-06 normal -->
      <div class="mini-cam" data-camid="06" onclick="swapToMain(this)">
        <div class="mini-cam-feed">
          <div class="mcf-bg mcf-normal" style="background:linear-gradient(160deg,#10160e 0%,#1c2218 60%,#0e1a0c 100%);"></div>
          <div class="mt-silhouette"></div>
          <div class="mini-hud-id">CAM-06</div>
          <div class="mini-hud-time" id="hud6">14:23:07</div>
          <div class="mini-rec-dot"></div>
        </div>
        <div class="mini-cam-info">
          <div>
            <div class="mi-name">CAM-06</div>
            <div class="mi-loc">ê²½ë‚¨ ì°½ì› ë¶ë©´</div>
          </div>
          <span class="cam-badge cb-normal">ì •ìƒ</span>
          <div class="mi-score ms-ok">0.9%</div>
        </div>
      </div>

    </div>
  </main>

  <!-- â•â•â•â•â•â•â•â• RIGHT PANEL â•â•â•â•â•â•â•â• -->
  <aside class="right-panel">

    <!-- Dispatch section -->
    <div class="rp-section">
      <div class="rp-title">âš¡ ì¶œë™ ìš”ì²­</div>

      <div class="dispatch-alert">
        <div class="da-header">
          <span class="da-badge">CRITICAL</span>
          <span class="da-title">CAM-07 ì‚°ë¶ˆ ë°œí™” í™•ì¸</span>
        </div>
        <div class="da-info">
          ìœ„ì¹˜: ê°•ì›ë„ ì‚¼ì²™ì‹œ ë„ê³„ì ì‚° 23ë²ˆì§€<br>
          AI ì‹ ë¢°ë„: <strong>94.2%</strong> Â· ê°ì§€: <strong>14:22:51</strong><br>
          ì¢Œí‘œ: 37.284Â°N, 129.011Â°E
        </div>
      </div>

      <div class="agency-dispatch">

        <!-- ì†Œë°©ì²­ â€” PRIMARY CTA -->
        <button class="agency-btn ab-fire" onclick="dispatch('fire')">
          <div class="agency-icon ai-fire">ğŸš’</div>
          <div class="agency-info">
            <div class="agency-name">ì†Œë°©ì„œ ê¸´ê¸‰ ì¶œë™ ìš”ì²­</div>
            <div class="agency-tel">119 Â· ì‚¼ì²™ì†Œë°©ì„œ ì¦‰ì‹œ ì—°ê²°</div>
          </div>
          <span class="agency-status as-alert" id="fire-status">ì¶œë™ ìš”ì²­</span>
        </button>

        <!-- ì‚°ë¦¼ì²­ -->
        <button class="agency-btn ab-forest" onclick="dispatch('forest')">
          <div class="agency-icon ai-forest">ğŸŒ²</div>
          <div class="agency-info">
            <div class="agency-name" style="color:var(--forest);">ì‚°ë¦¼ì²­ ì‚°ë¶ˆëŒ€ì‘íŒ€</div>
            <div class="agency-tel" style="color:var(--gray-500);">1588-3249 Â· ê°•ì›ë¶ë¶€ì‚°ë¦¼ì²­</div>
          </div>
          <span class="agency-status as-ready" id="forest-status">ì¶œë™ ëŒ€ê¸°</span>
        </button>


      </div>
    </div>

    <!-- AI confidence -->
    <div class="rp-section">
      <div class="rp-title">AI ë¶„ì„ ê²°ê³¼</div>

      <div class="conf-big">
        <div class="conf-ring">
          <svg viewBox="0 0 68 68">
            <circle class="cr-track" cx="34" cy="34" r="28"/>
            <circle class="cr-fill-fire" cx="34" cy="34" r="28"/>
          </svg>
          <div class="conf-ring-inner">
            <span class="cri-pct fire">94%</span>
            <span class="cri-sub">ì‹ ë¢°ë„</span>
          </div>
        </div>
        <div class="conf-text">
          <div class="conf-verdict fire">ì‚°ë¶ˆ ë°œí™” í™•ì¸</div>
          <div class="conf-detail">
            CNN + LSTM ì•™ìƒë¸”<br>
            íŒì •: <strong style="color:var(--red)">CRITICAL</strong>
          </div>
        </div>
      </div>

      <div class="metric-list">
        <div class="metric-row">
          <div class="metric-top">
            <span class="metric-key">í™”ì—¼ ê°ì§€ í™•ë¥ </span>
            <span class="metric-val mv-red">94.2%</span>
          </div>
          <div class="bar-track"><div class="bar-fill bf-red" style="width:94%"></div></div>
        </div>
        <div class="metric-row">
          <div class="metric-top">
            <span class="metric-key">ì—°ê¸° ê°ì§€ í™•ë¥ </span>
            <span class="metric-val mv-amber">87.6%</span>
          </div>
          <div class="bar-track"><div class="bar-fill bf-amber" style="width:88%"></div></div>
        </div>
        <div class="metric-row">
          <div class="metric-top">
            <span class="metric-key">ì˜¨ë„ ì´ìƒì¹˜</span>
            <span class="metric-val mv-red">89Â°C</span>
          </div>
          <div class="bar-track"><div class="bar-fill bf-red" style="width:89%"></div></div>
        </div>
        <div class="metric-row">
          <div class="metric-top">
            <span class="metric-key">ì´ìƒì¹˜ ì ìˆ˜</span>
            <span class="metric-val mv-red">0.942</span>
          </div>
          <div class="bar-track"><div class="bar-fill bf-red" style="width:94%"></div></div>
        </div>
      </div>
    </div>

    <!-- Location mini-map -->
    <div class="rp-section">
      <div class="rp-title">ë°œí™” ìœ„ì¹˜</div>
      <div class="mini-map" style="height:140px;">
        <svg width="100%" height="140" viewBox="0 0 300 140">
          <defs>
            <pattern id="mg" width="25" height="25" patternUnits="userSpaceOnUse">
              <path d="M 25 0 L 0 0 0 25" fill="none" stroke="#dde0e8" stroke-width=".5"/>
            </pattern>
            <radialGradient id="rg2" cx="50%" cy="50%">
              <stop offset="0%" stop-color="#da1e28" stop-opacity=".2"/>
              <stop offset="100%" stop-color="#da1e28" stop-opacity="0"/>
            </radialGradient>
          </defs>
          <rect width="300" height="140" fill="#eef0f6"/>
          <rect width="300" height="140" fill="url(#mg)"/>
          <!-- terrain -->
          <path d="M 20 80 Q 60 60, 100 75 Q 140 90, 180 65 Q 220 45, 280 70 L 280 140 L 20 140 Z" fill="#dce8d8" opacity=".7"/>
          <path d="M 20 95 Q 70 85, 120 90 Q 170 95, 200 85 Q 240 75, 280 90 L 280 140 L 20 140 Z" fill="#d0dece" opacity=".8"/>
          <!-- fire glow -->
          <circle cx="155" cy="72" r="30" fill="url(#rg2)"/>
          <circle cx="155" cy="72" r="8" fill="#da1e28">
            <animate attributeName="opacity" values="1;.3;1" dur="1.2s" repeatCount="indefinite"/>
          </circle>
          <circle cx="155" cy="72" r="4" fill="white"/>
          <!-- label -->
          <rect x="164" y="62" width="58" height="16" rx="4" fill="white" stroke="#f5b8b8"/>
          <text x="168" y="73.5" fill="#da1e28" font-size="9.5" font-family="DM Mono, monospace" font-weight="600">CAM-07 âš </text>
          <!-- scale -->
          <line x1="240" y1="128" x2="280" y2="128" stroke="#b0b8cc" stroke-width="1"/>
          <text x="248" y="122" fill="#b0b8cc" font-size="9" font-family="DM Mono,monospace">5 km</text>
        </svg>
      </div>
      <div style="display:flex; gap:8px; margin-top:10px;">
        <button class="sm-btn" style="flex:1; font-size:11.5px;">ğŸ“ ì§€ë„ í™•ëŒ€</button>
        <button class="sm-btn" style="flex:1; font-size:11.5px;">ğŸ›° ìœ„ì„± ë·°</button>
      </div>
    </div>

    <!-- Event timeline -->
    <div class="rp-section" style="flex:1;">
      <div class="rp-title">ì´ë²¤íŠ¸ ë¡œê·¸</div>
      <div class="event-list">
        <div class="event-item">
          <div class="ev-dot-wrap"><div class="ev-dot red"></div></div>
          <div class="ev-content">
            <div class="ev-title">ğŸ”¥ í™”ì¬ ë°œí™” AI ê°ì§€</div>
            <div class="ev-sub">CAM-07 Â· ì‹ ë¢°ë„ 94.2%</div>
            <div class="ev-time">14:22:51</div>
          </div>
        </div>
        <div class="event-item">
          <div class="ev-dot-wrap"><div class="ev-dot red"></div></div>
          <div class="ev-content">
            <div class="ev-title">ğŸš¨ ì†Œë°©ì„œ ì¶œë™ ìš”ì²­ ì „ì†¡</div>
            <div class="ev-sub">ì‚¼ì²™ì†Œë°©ì„œ ìë™ í†µë³´ ì™„ë£Œ</div>
            <div class="ev-time">14:22:53</div>
          </div>
        </div>
        <div class="event-item">
          <div class="ev-dot-wrap"><div class="ev-dot amber"></div></div>
          <div class="ev-content">
            <div class="ev-title">ğŸŒ² ì‚°ë¦¼ì²­ ì•Œë¦¼ ë°œì†¡</div>
            <div class="ev-sub">ê°•ì›ë¶ë¶€ì‚°ë¦¼ì²­ ìˆ˜ì‹  í™•ì¸</div>
            <div class="ev-time">14:22:55</div>
          </div>
        </div>
        <div class="event-item">
          <div class="ev-dot-wrap"><div class="ev-dot amber"></div></div>
          <div class="ev-content">
            <div class="ev-title">ğŸ” ì—°ê¸° ì˜ì‹¬ â€” CAM-03</div>
            <div class="ev-sub">ê²½ë¶ ì•ˆë™ Â· ì‹ ë¢°ë„ 62%</div>
            <div class="ev-time">14:21:38</div>
          </div>
        </div>
        <div class="event-item">
          <div class="ev-dot-wrap"><div class="ev-dot blue"></div></div>
          <div class="ev-content">
            <div class="ev-title">ğŸ“¡ Azure ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ì „ì†¡</div>
            <div class="ev-sub">IoT Hub â†’ Stream Analytics ì™„ë£Œ</div>
            <div class="ev-time">14:20:00</div>
          </div>
        </div>
        <div class="event-item">
          <div class="ev-dot-wrap"><div class="ev-dot gray"></div></div>
          <div class="ev-content">
            <div class="ev-title">âœ… ì‹œìŠ¤í…œ ì •ìƒ ê°€ë™ í™•ì¸</div>
            <div class="ev-sub">12ê°œ ì¹´ë©”ë¼ ì „ì²´ ì˜¨ë¼ì¸</div>
            <div class="ev-time">09:00:00</div>
          </div>
        </div>
      </div>
    </div>

  </aside>
</div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 2 Â· AI ANALYSIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page-ai">
<div class="ai-page">

  <!-- KPI row -->
  <div class="kpi-row">
    <div class="kpi-card">
      <div class="kpi-label">AI ê°ì§€ ì •í™•ë„</div>
      <div class="kpi-value kv-green">97.3%</div>
      <div class="kpi-delta"><span class="kd-up">â†‘ 0.8%</span> ì „ì›” ëŒ€ë¹„</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">í‰ê·  íƒì§€ ì‹œê°„</div>
      <div class="kpi-value kv-blue">&lt;3ë¶„</div>
      <div class="kpi-delta"><span class="kd-up">â†“ 40ì´ˆ</span> ê°œì„ ë¨</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">ì˜¤íƒ (FP) ìœ¨</div>
      <div class="kpi-value kv-amber">2.7%</div>
      <div class="kpi-delta"><span class="kd-up">â†“ 0.5%</span> ê°ì†Œ</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">ì˜¤ëŠ˜ ì²˜ë¦¬ ì´ë¯¸ì§€</div>
      <div class="kpi-value kv-dark">184K</div>
      <div class="kpi-delta" style="color:var(--gray-400)">12ëŒ€ ì¹´ë©”ë¼ Â· ì‹¤ì‹œê°„</div>
    </div>
  </div>

  <!-- CCTV AI Pipeline -->
  <div class="pipeline-card">
    <div class="card-title">CCTV <span>AI ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</span></div>
    <div class="card-sub">ì¹´ë©”ë¼ ì˜ìƒ â†’ ì „ì²˜ë¦¬ â†’ AI ëª¨ë¸ ì¶”ë¡  â†’ ê²½ë³´ â†’ ê¸°ê´€ ì¶œë™</div>
    <div class="pipe-steps">
      <div class="ps done">
        <div class="ps-icon">âœ“</div>
        <div class="ps-name">CCTV ìˆ˜ì§‘</div>
        <div class="ps-sub">12ì±„ë„ Â· RTSP</div>
      </div>
      <div class="ps done">
        <div class="ps-icon">âœ“</div>
        <div class="ps-name">í”„ë ˆì„ ì¶”ì¶œ</div>
        <div class="ps-sub">5fps Â· ë¦¬ì‚¬ì´ì¦ˆ</div>
      </div>
      <div class="ps done">
        <div class="ps-icon">âœ“</div>
        <div class="ps-name">ì „ì²˜ë¦¬</div>
        <div class="ps-sub">ì •ê·œí™” Â· ì¦ê°•</div>
      </div>
      <div class="ps active">
        <div class="ps-icon">ğŸ§ </div>
        <div class="ps-name">AI ì¶”ë¡ </div>
        <div class="ps-sub">CNN Â· YOLO</div>
      </div>
      <div class="ps todo">
        <div class="ps-icon">âš ï¸</div>
        <div class="ps-name">ê²½ë³´ íŒì •</div>
        <div class="ps-sub">ì„ê³„ê°’ í‰ê°€</div>
      </div>
      <div class="ps todo">
        <div class="ps-icon">ğŸ“¡</div>
        <div class="ps-name">ê¸°ê´€ ì¶œë™</div>
        <div class="ps-sub">ìë™ ì•Œë¦¼</div>
      </div>
    </div>
  </div>

  <!-- Model cards -->
  <div class="pipeline-card" style="margin-bottom:20px;">
    <div class="card-title">AI <span>ëª¨ë¸ ì„±ëŠ¥</span></div>
    <div class="card-sub">Azure ML Studio ë°°í¬ Â· v2.4.1</div>
    <div class="model-grid">
      <div class="model-card mc-r">
        <div class="mc-head">
          <div class="mc-icon mci-r">ğŸ”¥</div>
          <div>
            <div class="mc-title">CNN í™”ì—¼ ë¶„ë¥˜</div>
            <div class="mc-sub">YOLOv8 Â· í™”ì—¼Â·ì—°ê¸° íƒì§€</div>
          </div>
        </div>
        <div class="mc-metrics">
          <div class="mc-row"><span class="mc-key">Accuracy</span><span class="mc-val vg">97.3%</span></div>
          <div class="mc-row"><span class="mc-key">Precision</span><span class="mc-val vg">96.8%</span></div>
          <div class="mc-row"><span class="mc-key">Recall</span><span class="mc-val vg">98.1%</span></div>
          <div class="mc-row"><span class="mc-key">Inference</span><span class="mc-val vb">0.34s</span></div>
          <div class="mc-row"><span class="mc-key">í•™ìŠµ ë°ì´í„°</span><span class="mc-val">124,000ì¥</span></div>
        </div>
      </div>
      <div class="model-card mc-a">
        <div class="mc-head">
          <div class="mc-icon mci-a">ğŸ“ˆ</div>
          <div>
            <div class="mc-title">LSTM ì‹œê³„ì—´</div>
            <div class="mc-sub">ì˜¨ë„ Â· í™˜ê²½ ì´ìƒ íƒì§€</div>
          </div>
        </div>
        <div class="mc-metrics">
          <div class="mc-row"><span class="mc-key">MAE</span><span class="mc-val vg">1.23Â°C</span></div>
          <div class="mc-row"><span class="mc-key">RMSE</span><span class="mc-val vg">2.87</span></div>
          <div class="mc-row"><span class="mc-key">Anomaly F1</span><span class="mc-val vg">95.6%</span></div>
          <div class="mc-row"><span class="mc-key">Sequence</span><span class="mc-val vb">60ë¶„</span></div>
          <div class="mc-row"><span class="mc-key">ì˜ˆì¸¡ ë²”ìœ„</span><span class="mc-val">10ë¶„ í›„</span></div>
        </div>
      </div>
      <div class="model-card mc-b">
        <div class="mc-head">
          <div class="mc-icon mci-b">ğŸŒªï¸</div>
          <div>
            <div class="mc-title">í™•ì‚° ì˜ˆì¸¡ ëª¨ë¸</div>
            <div class="mc-sub">ê¸°ìƒ Â· ì§€í˜• ê¸°ë°˜ í™•ì‚°</div>
          </div>
        </div>
        <div class="mc-metrics">
          <div class="mc-row"><span class="mc-key">10ë¶„ ì •í™•ë„</span><span class="mc-val vg">91.4%</span></div>
          <div class="mc-row"><span class="mc-key">30ë¶„ ì •í™•ë„</span><span class="mc-val va">84.2%</span></div>
          <div class="mc-row"><span class="mc-key">ì…ë ¥ ë³€ìˆ˜</span><span class="mc-val vb">18ê°œ</span></div>
          <div class="mc-row"><span class="mc-key">ëª¨ë¸ ìœ í˜•</span><span class="mc-val">GBM + Physics</span></div>
          <div class="mc-row"><span class="mc-key">ì—…ë°ì´íŠ¸</span><span class="mc-val">5ë¶„ ì£¼ê¸°</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Data preprocessing -->
  <div class="pipeline-card">
    <div class="card-title">ì˜ìƒ <span>ë°ì´í„° ì „ì²˜ë¦¬</span></div>
    <div class="card-sub">CCTV ì›ë³¸ ì˜ìƒ â†’ Azure Data Factory â†’ AI í•™ìŠµ ê°€ëŠ¥ ë°ì´í„°ì…‹</div>
    <div class="prep-grid">
      <div class="prep-card">
        <div class="prep-num">STEP 01</div>
        <span class="prep-icon">ğŸ¬</span>
        <div class="prep-title">í”„ë ˆì„ ì¶”ì¶œ</div>
        <div class="prep-desc">RTSP ìŠ¤íŠ¸ë¦¼ì—ì„œ 5fpsë¡œ í”„ë ˆì„ ì¶”ì¶œ, 640Ã—640 ë¦¬ì‚¬ì´ì¦ˆ í›„ JPEG ë³€í™˜í•©ë‹ˆë‹¤.</div>
        <div class="prep-tag" style="background:var(--blue-lt);color:var(--blue);">OpenCV Â· RTSP</div>
      </div>
      <div class="prep-card">
        <div class="prep-num">STEP 02</div>
        <span class="prep-icon">âš–ï¸</span>
        <div class="prep-title">ì •ê·œí™”</div>
        <div class="prep-desc">í”½ì…€ ê°’ì„ 0~1 ë²”ìœ„ë¡œ ì •ê·œí™”í•˜ê³  ì±„ë„ë³„ í‰ê· Â·í‘œì¤€í¸ì°¨ë¡œ í‘œì¤€í™”í•©ë‹ˆë‹¤.</div>
        <div class="prep-tag" style="background:var(--green-lt);color:var(--green);">ImageNet ê¸°ë°˜</div>
      </div>
      <div class="prep-card">
        <div class="prep-num">STEP 03</div>
        <span class="prep-icon">ğŸ”„</span>
        <div class="prep-title">ë°ì´í„° ì¦ê°•</div>
        <div class="prep-desc">ì•¼ê°„Â·ì—­ê´‘Â·ì•ˆê°œ í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜, íšŒì „Â·í”Œë¦½ìœ¼ë¡œ í•™ìŠµ ë°ì´í„°ë¥¼ 8ë°° í™•ì¥í•©ë‹ˆë‹¤.</div>
        <div class="prep-tag" style="background:var(--amber-lt);color:var(--amber);">Ã—8 ì¦ê°•</div>
      </div>
      <div class="prep-card">
        <div class="prep-num">STEP 04</div>
        <span class="prep-icon">ğŸ·ï¸</span>
        <div class="prep-title">ë¼ë²¨ë§</div>
        <div class="prep-desc">í™”ì—¼Â·ì—°ê¸°Â·ì •ìƒ í´ë˜ìŠ¤ ë°”ìš´ë”©ë°•ìŠ¤ ë¼ë²¨ë§ í›„ YOLO í¬ë§·ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</div>
        <div class="prep-tag" style="background:var(--red-lt);color:var(--red);">YOLO í¬ë§·</div>
      </div>
    </div>
  </div>

</div>
</div>


<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CAMERA SWAP
   ë¯¸ë‹ˆìº  í´ë¦­ â†’ ë©”ì¸ìº ê³¼ í†µì§¸ë¡œ êµí™˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function swapToMain(miniEl) {
  const featured = document.querySelector('.featured-cam');
  if (!featured || !miniEl) return;

  // 1. innerHTML êµí™˜
  const tempHTML = featured.innerHTML;
  featured.innerHTML = miniEl.innerHTML;
  miniEl.innerHTML   = tempHTML;

  // 2. data-camid êµí™˜
  const tempId = featured.dataset.camid;
  featured.dataset.camid = miniEl.dataset.camid;
  miniEl.dataset.camid   = tempId;

  // 3. mc-* alert í´ë˜ìŠ¤ êµí™˜ (mc-alert ë“±)
  const featAlerts = Array.from(featured.classList).filter(c => c.startsWith('mc-'));
  const miniAlerts = Array.from(miniEl.classList).filter(c => c.startsWith('mc-'));
  featAlerts.forEach(c => featured.classList.remove(c));
  miniAlerts.forEach(c => miniEl.classList.remove(c));
  miniAlerts.forEach(c => featured.classList.add(c));
  featAlerts.forEach(c => miniEl.classList.add(c));

  // 4. ë©”ì¸ìº  ìŠ¤íŠ¸ë¡œë¸Œ ìƒíƒœ ì—…ë°ì´íŠ¸
  const newBadge = featured.querySelector('.cam-badge');
  featured.classList.remove('fire-strobe', 'smoke-strobe');
  if (newBadge) {
    if (newBadge.classList.contains('cb-fire'))  featured.classList.add('fire-strobe');
    if (newBadge.classList.contains('cb-watch')) featured.classList.add('smoke-strobe');
  }

  // 5. ìŠ¤í¬ë¡¤ ìƒë‹¨
  document.querySelector('.cctv-area')?.scrollTo({ top: 0, behavior: 'smooth' });
}

// í† ìŠ¤íŠ¸ "ì¹´ë©”ë¼ í™•ì¸" ë²„íŠ¼ìš©
function swapToMainById(camId) {
  const miniEl = document.querySelector(`.mini-cam[data-camid="${camId}"]`);
  if (miniEl) swapToMain(miniEl);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CLOCK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function tick() {
  const t = new Date().toLocaleTimeString('ko-KR',{hour12:false});
  const clockEl = document.getElementById('clock');
  if(clockEl) clockEl.textContent = t;
  const hudTime = document.getElementById('hud-time');
  if(hudTime) hudTime.textContent = t;
  ['hud1','hud2','hud3','hud4','hud5','hud6'].forEach(id=>{
    const el=document.getElementById(id); if(el) el.textContent=t;
  });
}
setInterval(tick,1000); tick();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE SWITCH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function switchTab(id, btn) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('on'));
  document.querySelectorAll('.ttab').forEach(b=>b.classList.remove('on'));
  document.getElementById('page-'+id).classList.add('on');
  btn.classList.add('on');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ALARM SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let alarmElapsed = 0;
let bannerVisible = true;
let elapsedTimer = null;

// Start elapsed timer
function startElapsedTimer() {
  elapsedTimer = setInterval(() => {
    alarmElapsed++;
    const el = document.getElementById('elapsedTime');
    if(!el) return;
    if(alarmElapsed < 60) el.textContent = alarmElapsed + 'ì´ˆ';
    else el.textContent = Math.floor(alarmElapsed/60) + 'ë¶„ ' + (alarmElapsed%60) + 'ì´ˆ';
  }, 1000);
}
startElapsedTimer();

// Show banner (fire or smoke)
function showBanner(type) {
  const banner = document.getElementById('alarmBanner');
  const flash  = document.getElementById('flashOverlay');
  const topbar = document.getElementById('topbarEl');
  const layout = document.getElementById('mainLayout');

  banner.className = 'alarm-banner alarm-banner-' + type + ' visible';
  flash.className  = 'alarm-flash-overlay ' + type + '-active';
  topbar.className = 'topbar alarm-' + type;
  if(layout) layout.classList.remove('no-banner');

  if(type === 'fire') {
    banner.querySelector('.ab-icon').textContent = 'ğŸ”¥';
    banner.querySelector('.ab-title').innerHTML = '<span class="ab-blink">âš </span>&nbsp; ì‚°ë¶ˆ ë°œí™” ê°ì§€ â€” CAM-07';
    banner.querySelector('.ab-meta').innerHTML = 'ê°•ì›ë„ ì‚¼ì²™ì‹œ ë„ê³„ì ì‚° 23ë²ˆì§€ &nbsp;Â·&nbsp; AI ì‹ ë¢°ë„ <strong style="color:white;font-weight:800;">94.2%</strong>';
    banner.querySelector('.ab-btn-primary').textContent = 'ğŸš’ ì†Œë°©ì„œ ì¶œë™';
    banner.querySelector('.ab-btn-primary').onclick = () => dispatchFromBanner('fire');
  } else {
    banner.querySelector('.ab-icon').textContent = 'ğŸŒ«ï¸';
    banner.querySelector('.ab-title').innerHTML = '<span class="ab-blink">!</span>&nbsp; ì—°ê¸° ì˜ì‹¬ ê°ì§€ â€” CAM-03';
    banner.querySelector('.ab-meta').innerHTML = 'ê²½ìƒë¶ë„ ì•ˆë™ì‹œ ê¸¸ì•ˆë©´ &nbsp;Â·&nbsp; AI ì‹ ë¢°ë„ <strong style="color:white;font-weight:800;">62%</strong>';
    banner.querySelector('.ab-btn-primary').textContent = 'ğŸŒ² ì‚°ë¦¼ì²­ í™•ì¸ ìš”ì²­';
    banner.querySelector('.ab-btn-primary').onclick = () => dispatchFromBanner('forest');
  }
}

// Dismiss banner
function dismissBanner() {
  const banner = document.getElementById('alarmBanner');
  const flash  = document.getElementById('flashOverlay');
  const topbar = document.getElementById('topbarEl');
  const layout = document.getElementById('mainLayout');

  banner.classList.remove('visible');
  flash.className = 'alarm-flash-overlay';
  topbar.className = 'topbar';
  if(layout) layout.classList.add('no-banner');
  if(elapsedTimer) clearInterval(elapsedTimer);
  bannerVisible = false;
}

// Dispatch from banner
function dispatchFromBanner(type) {
  dispatch(type);
  dismissBanner();
  showToast({
    type: type === 'fire' ? 'fire' : 'smoke',
    title: type === 'fire' ? 'ğŸš’ ì†Œë°©ì„œ ì¶œë™ ìš”ì²­ ì™„ë£Œ' : 'ğŸŒ² ì‚°ë¦¼ì²­ ì¶œë™ ìš”ì²­ ì™„ë£Œ',
    body: type === 'fire'
      ? '<strong>ì‚¼ì²™ì†Œë°©ì„œ</strong>ì— GPS ì¢Œí‘œ ë° AI ê°ì§€ ë°ì´í„° ì „ì†¡ ì™„ë£Œ'
      : '<strong>ê°•ì›ë¶ë¶€ì‚°ë¦¼ì²­</strong>ì— ì—°ê¸° ê°ì§€ ë°ì´í„° ì „ì†¡ ì™„ë£Œ',
    conf: type === 'fire' ? 94 : 62,
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let toastCount = 0;

function showToast({ type, title, body, conf, camId }) {
  const stack = document.getElementById('toastStack');
  if(!stack) return;

  const id = 'toast-' + (++toastCount);
  const isfire = type === 'fire';

  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.id = id;

  const confirmAction = camId
    ? `swapToMainById('${camId}'); closeToast('${id}');`
    : `closeToast('${id}')`;
  const confirmLabel = camId ? 'ğŸ“· ì¹´ë©”ë¼ í™•ì¸' : 'í™•ì¸';

  toast.innerHTML = `
    <div class="toast-stripe ${isfire ? 'ts-fire' : 'ts-smoke'}"></div>
    <div class="toast-inner">
      <div class="toast-header">
        <div class="toast-icon ${isfire ? 'ti-fire' : 'ti-smoke'}">${isfire ? 'ğŸ”¥' : 'ğŸŒ«ï¸'}</div>
        <div class="toast-title ${isfire ? 'tt-fire' : 'tt-smoke'}">${title}</div>
        <button class="toast-close" onclick="closeToast('${id}')">âœ•</button>
      </div>
      <div class="toast-body">${body}</div>
      <div class="toast-conf-bar">
        <div class="tcb-fill ${isfire ? 'tcb-fire' : 'tcb-smoke'}" style="width:0%" id="tcb-${id}"></div>
      </div>
      <div class="toast-footer">
        <button class="tf-btn tf-primary ${isfire ? '' : 'amber-bg'}" onclick="${confirmAction}">${confirmLabel}</button>
        <button class="tf-btn tf-secondary" onclick="closeToast('${id}')">ë‹«ê¸°</button>
      </div>
    </div>`;

  stack.appendChild(toast);

  setTimeout(() => {
    const bar = document.getElementById('tcb-' + id);
    if(bar) bar.style.width = conf + '%';
  }, 100);

  setTimeout(() => closeToast(id), 8000);
}

function closeToast(id) {
  const t = document.getElementById(id);
  if(!t) return;
  t.classList.add('toast-exit');
  setTimeout(() => t.remove(), 310);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INITIAL TOASTS ON LOAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
window.addEventListener('DOMContentLoaded', () => {
  // Fire alert toast immediately
  setTimeout(() => {
    showToast({
      type: 'fire',
      title: 'ğŸ”¥ ì‚°ë¶ˆ í™”ì¬ ê°ì§€',
      body: '<strong>CAM-07 ê°•ì›ë„ ì‚¼ì²™ì‹œ</strong><br>í™”ì—¼ 94.2% Â· ì—°ê¸° 87.6% Â· ì¦‰ê° ëŒ€ì‘ í•„ìš”',
      conf: 94,
      camId: '07',
    });
  }, 800);

  // Smoke warning toast after 2.5s
  setTimeout(() => {
    showToast({
      type: 'smoke',
      title: 'ğŸŒ«ï¸ ì—°ê¸° ì˜ì‹¬ ê°ì§€',
      body: '<strong>CAM-03 ê²½ë¶ ì•ˆë™ì‹œ ê¸¸ì•ˆë©´</strong><br>ì—°ê¸° ì˜ì‹¬ 62% Â· ì§€ì† ëª¨ë‹ˆí„°ë§ ì¤‘',
      conf: 62,
      camId: '03',
    });
  }, 2500);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DISPATCH HANDLER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const dispatched = {};
function dispatch(type) {
  if(dispatched[type]) return;
  dispatched[type] = true;

  const map = {
    fire:   { id:'fire-status',   label:'ì¶œë™ ì¤‘ ğŸš’', bg:'rgba(255,255,255,.25)', c:'white' },
    forest: { id:'forest-status', label:'ì¶œë™ ì¤‘ ğŸŒ²', bg:'#e3fbe9', c:'#0d8c4a' },
    police: { id:'police-status', label:'ì¶œë™ ì¤‘ ğŸš”', bg:'#eaf0ff', c:'#1251c9' },
  };

  const m = map[type];
  const el = document.getElementById(m.id);
  if(el) {
    el.textContent = m.label;
    el.style.background = m.bg;
    el.style.color = m.c;
  }

  // Log event
  const names = {
    fire:   'ğŸš’ ì†Œë°©ì„œ ì¶œë™ ìš”ì²­ ìˆ˜ë½',
    forest: 'ğŸŒ² ì‚°ë¦¼ì²­ ì¶œë™ í™•ì¸',
    police: 'ğŸš” ê²½ì°°ì²­ í˜„ì¥ í†µì œ ì¶œë™'
  };
  const log = document.querySelector('.event-list');
  if(log) {
    const now = new Date().toLocaleTimeString('ko-KR',{hour12:false});
    const item = document.createElement('div');
    item.className = 'event-item';
    item.innerHTML = `
      <div class="ev-dot-wrap"><div class="ev-dot green"></div></div>
      <div class="ev-content">
        <div class="ev-title">${names[type]}</div>
        <div class="ev-sub">GPS ì¢Œí‘œÂ·AI ë¶„ì„ ë°ì´í„° ì „ì†¡ ì™„ë£Œ</div>
        <div class="ev-time">${now}</div>
      </div>`;
    log.prepend(item);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AI JITTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function jitter() {
  const base = 93 + Math.random()*3;
  document.querySelectorAll('.ai-score-val').forEach(el=>{
    el.textContent = base.toFixed(1)+'%';
  });
}
setInterval(jitter, 3500);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAP LAYER TOGGLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.querySelectorAll('.map-layer-btn').forEach(btn=>{
  btn.addEventListener('click',function(){
    document.querySelectorAll('.map-layer-btn').forEach(b=>b.classList.remove('active-layer'));
    this.classList.add('active-layer');
  });
});
</script>
</body>
</html>
